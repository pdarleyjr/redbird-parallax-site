<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Red Bird Trail Map</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://unpkg.com/maplibre-gl@3.5.2/dist/maplibre-gl.js"></script>
    <link href="https://unpkg.com/maplibre-gl@3.5.2/dist/maplibre-gl.css" rel="stylesheet">
    <style>
        body { margin: 0; padding: 0; }
        #map { position: absolute; top: 0; bottom: 0; width: 100%; }
        .marker {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
            font-size: 24px;
            cursor: pointer;
            filter: drop-shadow(0 2px 4px rgba(0,0,0,0.3));
        }
        .marker:hover {
            transform: scale(1.1);
        }
        .maplibregl-popup {
            font-family: system-ui, sans-serif;
        }
        .maplibregl-popup-content {
            background: #1c2036;
            color: white;
            padding: 10px 15px;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
        }
        .maplibregl-popup-close-button {
            color: white;
        }
    </style>
</head>
<body>
    <div id="map"></div>
    <script>
        const pins = [{"address": "3624 SW 58th Ave, Miami, FL 33155", "label": "\ud83c\udf83 Carter-Goldberg Family", "lat": 25.7369711, "lon": -80.2893689}, {"address": "3831 SW 60th Ave, Miami, FL 33155", "label": "\ud83c\udf83 Grape Family", "lat": 25.7354624, "lon": -80.2912491}, {"address": "3703 SW 58th Ave, Miami, FL 33155", "label": "\ud83c\udf83 The Mena Family", "lat": 25.7369315, "lon": -80.2888794}, {"address": "5825 SW 35th Street, Miami, FL 33155", "label": "\ud83c\udf83 Fisher Family", "lat": 25.7381836, "lon": -80.289618}, {"address": "3710 SW 59th Ave, Miami, FL 33155", "label": "\ud83c\udf83 Cachonegrete", "lat": 25.7365999, "lon": -80.2909654}, {"address": "3930 SW 60th Avenue, Miami, FL 33155", "label": "\ud83c\udf83 Caamano-Gonzalez", "lat": 25.7348209, "lon": -80.2916934}, {"address": "3611 sw 60th ct., Miami, Fl", "label": "\ud83c\udf83 Permuy Family", "lat": 25.737076, "lon": -80.2921462}, {"address": "3610 SW 60th Ave, Miami, FL 33155", "label": "\ud83c\udf83 The Alexander\u2019s", "lat": 25.7370729, "lon": -80.2918159}, {"address": "3801 SW 60th Ave, Miami FL 33155", "label": "\ud83c\udf83 The Wood family", "lat": 25.7358983, "lon": -80.291269}];
        
        // Initialize map with CARTO Dark Matter style
        const map = new maplibregl.Map({
            container: 'map',
            style: 'https://basemaps.cartocdn.com/gl/dark-matter-gl-style/style.json',
            center: [-80.2974, 25.7398],
            zoom: 15
        });
        
        map.on('load', () => {
            // Add markers for each pin
            pins.forEach((pin, index) => {
                if (pin.lat && pin.lon) {
                    // Create marker element
                    const el = document.createElement('div');
                    el.className = 'marker';
                    el.innerHTML = pin.label.split(' ')[0]; // Just the emoji
                    
                    // Add marker to map
                    new maplibregl.Marker({element: el})
                        .setLngLat([pin.lon, pin.lat])
                        .setPopup(
                            new maplibregl.Popup({ offset: 25 })
                                .setHTML(`<h3>${pin.label}</h3><p>${pin.address}</p>`)
                        )
                        .addTo(map);
                }
            });
            
            // Create trail path connecting all points
            const coordinates = pins
                .filter(p => p.lat && p.lon)
                .map(p => [p.lon, p.lat]);
            
            if (coordinates.length > 1) {
                map.addSource('trail', {
                    type: 'geojson',
                    data: {
                        type: 'Feature',
                        geometry: {
                            type: 'LineString',
                            coordinates: coordinates
                        }
                    }
                });
                
                map.addLayer({
                    id: 'trail-line',
                    type: 'line',
                    source: 'trail',
                    layout: {
                        'line-join': 'round',
                        'line-cap': 'round'
                    },
                    paint: {
                        'line-color': '#ff6a00',
                        'line-width': 3,
                        'line-opacity': 0.8,
                        'line-dasharray': [2, 2]
                    }
                });
            }
            
            // Fit map to show all markers
            if (coordinates.length > 0) {
                const bounds = coordinates.reduce((bounds, coord) => {
                    return bounds.extend(coord);
                }, new maplibregl.LngLatBounds(coordinates[0], coordinates[0]));
                
                map.fitBounds(bounds, { padding: 50 });
            }
        });
    </script>
</body>
</html>